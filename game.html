<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UTS-PTI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css" />
</head>
<body onload="startTime(); idle();">
    <div class="container">
        <a href="index.html"><button class="btn btn-primary home">Home</button></a>
        <div class="container-fluid section-header">
            <img class="logo" src="img/logo.png">
            <h2>Life of A College's Student</h2>
        </div>
        <hr>
        <div class="container-fluid section-status col-lg-4">
            <div class="row">
                <div class="col-md-6">
                    <label for="eat"><img src="img/eat.png"/></label>
                    <progress id="eat" value="5" max="10"></progress>
                </div>
                <div class="col-md-6">
                    <label for="sleep"><img src="img/sleep.png"/></label>
                    <progress id="sleep" value="5" max="10"></progress>
                </div>
                <div class="col-md-6">
                    <label for="play"><img src="img/play.png"/></label>
                    <progress id="play" value="5" max="10"></progress>
                </div>
                <div class="col-md-6">
                    <label for="study"><img src="img/study.png"/></label>
                    <progress id="study" value="0" max="20"></progress>
                </div>
                <div class="col-md-12">
                    <h3><span id="semester">1st </span> Semester</h3>
                </div>
            </div>
        </div>
        <div class="container-fluid section-chara mb-2">
            <h2><span id="greeting"></span><span id="username"></span></h2>
            <input type="text" id="genders" style="display: none;">
            <div id="time"></div>
            <img id="chara" class="avatar1 mb-2">
        </div>
        <div class="container-fluid section-activity col-md-4">
            <div class="row">
                <div class="col-md-6 mb-2">
                    <button id="btn-1" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalMakan">Eat</button>
                </div>
                <div class="col-md-6 mb-2">
                    <button id="btn-2" class="btn btn-primary" onclick="setTimeout(tidur, 20000); charaTidur(); tombolHilang();">Sleep</button>
                </div>
                <div class="col-md-6 mb-2">
                    <button id="btn-3" class="btn btn-primary" onclick="setTimeout(main, 10000); charaMain(); tombolHilang();">Play</button>
                </div>
                <div class="col-md-6 mb-2">
                    <button id="btn-4" class="btn btn-primary" onclick="setTimeout(belajar, 15000); charaBelajar(); tombolHilang();">Study</button>
                </div>
            </div>
        </div>
        <div class="modal fade" id="modalMakan" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Choose Your Food!</h5>
                    </div>
                    <div class="modal-body">
                        <div class="row text-center">
                            <div class="col-md-3">
                                <img src="img/snack.png" id="snack1" onclick="setTimeout(makanSnack, 2500); charaMakan(); tombolHilang();">Snack</button>
                            </div>
                            <div class="col-md-3">
                                <img src="img/rice.png" id="snack2" onclick="setTimeout(makanNasi, 10000); charaMakan(); tombolHilang();">Rice</button>
                            </div>
                            <div class="col-md-3">
                                <img src="img/noodle.png" id="snack3" onclick="setTimeout(makanMie, 7500); charaMakan(); tombolHilang();">Noodle</button>
                            </div>
                            <div class="col-md-3">
                                <img src="img/bisquit.png" id="snack4" onclick="setTimeout(makanBisquit, 5000); charaMakan(); tombolHilang();">Biscuit</button>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="modal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        You are starving, eat soon!
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="modal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        You are very tired, go to sleep soon!
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="modal3" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        You feel very bored, play immediately!
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="modal4" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        You have a lack of knowledge, study immediately!
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="modal5" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        Your character dies of hunger and exhaustion!
                    </div>
                    <div class="modal-footer">
                        <a href="index.html"><button type="button" class="btn btn-danger">Exit</button></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="modal6" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <span id="naik-semester"></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="modal7" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">Congratulations, you have graduated!</h2>
                    </div>
                    <div class="modal-body">
                        <div class="row text-center">
                            <div class="col-md-12">
                                <img src="img/trophy.png" id="trophy">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <a href="index.html"><button type="button" class="btn btn-success">Finish</button></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
    document.getElementById("username").innerHTML = name;
    document.getElementById("genders").value = localStorage.getItem("gender");

    var charaGender = document.getElementById("genders").value;
    function idle() {
        if (charaGender == "boy") {
            document.getElementById("chara").src="img/boy_idle.png";
        } else if (charaGender == "girl") {
            document.getElementById("chara").src="img/girl_idle.png";
        }
    }

    const timer = document.getElementById("time");

    var hour = 7;
    var minute = 00;
    var stoptime = true;

    function startTime() {
        minute = parseInt(minute);
        hour = parseInt(hour);

        minute = minute + 1;

        if (minute == 60) {
            hour = hour + 1;
            minute = 0;
        }

        if (minute < 10 || minute == 0) {
            minute = '0' + minute;
        }
        if (hour < 10 || hour == 0) {
            hour = '0' + hour;
        }
        if (hour > 23) {
            hour = '00';
        }

        timer.innerHTML = hour + ':' + minute;

        setTimeout("startTime()", 1000);
    }

    $(document).ready(function() {
        function greeting() {
            if (hour < 6) {
                $("#greeting").html("Good Night ");
                document.body.style.backgroundImage = "url(img/night.jpg)";
            } else if (hour < 11) {
                $("#greeting").html("Good Morning ");
                document.body.style.backgroundImage = "url(img/morning.jpg)";
            } else if (hour < 15) {
                $("#greeting").html("Good Afternoon ");
                document.body.style.backgroundImage = "url(img/afternoon.jpg)";
            } else if (hour < 18) {
                $("#greeting").html("Good Evening ");
                document.body.style.backgroundImage = "url(img/evening.jpg)";
            } else {
                $("#greeting").html("Good Night ");
                document.body.style.backgroundImage = "url(img/night.jpg)";
            }
        }
        setInterval(greeting, 0);
    });

	$("#snack1, #snack2, #snack3, #snack4").click(function() {
		$("#modalMakan").modal("hide");
	});

    function makanSnack() {
        document.getElementById("eat").value += 2;
        document.getElementById("sleep").value -= 1;
        document.getElementById("play").value -= 1;
        if(document.getElementById("study").value > 0) {
            document.getElementById("study").value -= 0.5;
        }

        document.getElementById("btn-1").disabled = false;
        document.getElementById("btn-2").disabled = false;
        document.getElementById("btn-3").disabled = false;
        document.getElementById("btn-4").disabled = false;

        idle();
    }
    function makanNasi() {
        document.getElementById("eat").value += 5;
        document.getElementById("sleep").value -= 1;
        document.getElementById("play").value -= 1;
        if(document.getElementById("study").value > 0) {
            document.getElementById("study").value -= 0.5;
        }

        document.getElementById("btn-1").disabled = false;
        document.getElementById("btn-2").disabled = false;
        document.getElementById("btn-3").disabled = false;
        document.getElementById("btn-4").disabled = false;

        idle();
    }
    function makanMie() {
        document.getElementById("eat").value += 4;
        document.getElementById("sleep").value -= 1;
        document.getElementById("play").value -= 1;
        if(document.getElementById("study").value > 0) {
            document.getElementById("study").value -= 0.5;
        }

        document.getElementById("btn-1").disabled = false;
        document.getElementById("btn-2").disabled = false;
        document.getElementById("btn-3").disabled = false;
        document.getElementById("btn-4").disabled = false;

        idle();
    }
    function makanBisquit() {
        document.getElementById("eat").value += 3;
        document.getElementById("sleep").value -= 1;
        document.getElementById("play").value -= 1;
        if(document.getElementById("study").value > 0) {
            document.getElementById("study").value -= 0.5;
        }

        document.getElementById("btn-1").disabled = false;
        document.getElementById("btn-2").disabled = false;
        document.getElementById("btn-3").disabled = false;
        document.getElementById("btn-4").disabled = false;

        idle();
    }
    function charaMakan() {
        if (charaGender == "boy") {
            document.getElementById("chara").src="img/boy_eat.png";
        } else if (charaGender == "girl") {
            document.getElementById("chara").src="img/girl_eat.png";
        }
    }
    setInterval(lapar, 10000);
    function lapar() {
        document.getElementById("eat").value -= 0.5;

        if(document.getElementById("eat").value <=1) {
            //window.alert("Anda sedang kelaparan, segera makan!");
            
            $("#modal1").modal('show');
            mati();

            if (charaGender == "boy") {
                document.getElementById("chara").src="img/boy_hungry.png";
            } else if (charaGender == "girl") {
                document.getElementById("chara").src="img/girl_hungry.png";
            }
        }
    }

    function tidur() {
        document.getElementById("eat").value -= 1;
        document.getElementById("sleep").value += 7;
        document.getElementById("play").value -= 0.5;
        if(document.getElementById("study").value > 0) {
            document.getElementById("study").value -= 0.5;
        }

        document.getElementById("btn-1").disabled = false;
        document.getElementById("btn-2").disabled = false;
        document.getElementById("btn-3").disabled = false;
        document.getElementById("btn-4").disabled = false;

        idle();
    }
    function charaTidur() {
        if (charaGender == "boy") {
            document.getElementById("chara").src="img/boy_sleep.png";
        } else if (charaGender == "girl") {
            document.getElementById("chara").src="img/girl_sleep.png";
        }
    }
    setInterval(ngantuk, 20000);
    function ngantuk() {
        document.getElementById("sleep").value -= 0.5;
        
        if(document.getElementById("sleep").value <=1) {
            //window.alert("Anda sangat kelelahan, segera tidur!");
            
            $("#modal2").modal('show');
            mati();
            
            if (charaGender == "boy") {
                document.getElementById("chara").src="img/boy_tired.png";
            } else if (charaGender == "girl") {
                document.getElementById("chara").src="img/girl_tired.png";
            }
        }
    }

    function main() {
        document.getElementById("eat").value -= 1;
        document.getElementById("sleep").value -= 1.5;
        document.getElementById("play").value += 5;
        if(document.getElementById("study").value > 0) {
            document.getElementById("study").value -= 1;
        }
        
        document.getElementById("btn-1").disabled = false;
        document.getElementById("btn-2").disabled = false;
        document.getElementById("btn-3").disabled = false;
        document.getElementById("btn-4").disabled = false;
        
        idle();
    }
    function charaMain() {
        if (charaGender == "boy") {
            document.getElementById("chara").src="img/boy_playing.png";
        } else if (charaGender == "girl") {
            document.getElementById("chara").src="img/girl_playing.png";
        }
    }
    setInterval(bosan, 15000);
    function bosan() {
        document.getElementById("play").value -= 0.5;
        
        if(document.getElementById("play").value <=1) {
            //window.alert("Anda merasa sangat bosan, segera main!");
            
            $("#modal3").modal('show');
            
            if (charaGender == "boy") {
                document.getElementById("chara").src="img/boy_bored.png";
            } else if (charaGender == "girl") {
                document.getElementById("chara").src="img/girl_bored.png";
            }
        }
    }

    function belajar() {
        document.getElementById("eat").value -= 1.5;
        document.getElementById("sleep").value -= 1;
        document.getElementById("play").value -= 1;
        document.getElementById("study").value += 10;
        
        document.getElementById("btn-1").disabled = false;
        document.getElementById("btn-2").disabled = false;
        document.getElementById("btn-3").disabled = false;
        document.getElementById("btn-4").disabled = false;
        
        idle();
        
        var semester = document.getElementById("semester").innerHTML;
        if(document.getElementById("study").value >= document.getElementById("study").max) {
            var newSemester = parseInt(semester,10) + 1;
            var newSemesters = "";
            if (newSemester == 1) {
                newSemesters = "1st";
            } else if (newSemester == 2) {
                newSemesters = "2nd";
            } else if (newSemester == 3) {
                newSemesters = "3rd";
            } else if (newSemester >= 4) {
                newSemesters = newSemester + "th";
            }

            if(newSemester <= 8) {
                document.getElementById("semester").innerHTML = newSemesters;
                document.getElementById("study").value = 0;
                document.getElementById("study").max += 2.5;
                //window.alert("Selamat, anda telah naik ke semester " + newSemester);
                document.getElementById("naik-semester").innerHTML = ("Congratulations, you have advanced to the " + newSemesters + " semester!");
                $("#modal6").modal('show');
            } else {
                //window.alert("Selamat, anda telah lulus");
                $("#modal7").modal({backdrop: "static", keyboard: false});
                $("#modal7").modal('show');
            }
        }
    }
    function charaBelajar() {
        if (charaGender == "boy") {
            document.getElementById("chara").src="img/boy_study.png";
        } else if (charaGender == "girl") {
            document.getElementById("chara").src="img/girl_study.png";
        }
    }
    setInterval(tidakPintar, 60000);
    function tidakPintar() {
        if(document.getElementById("study").value > 0) {
            document.getElementById("study").value -= 0.5;
        }

        if(document.getElementById("study").value <= 0) {
            //window.alert("Pengetahuan anda kurang, segera belajar!");

            $("#modal4").modal('show');
            
            if (charaGender == "boy") {
                document.getElementById("chara").src="img/boy_dumb.png";
            } else if (charaGender == "girl") {
                document.getElementById("chara").src="img/girl_dumb.png";
            }
        }
    }

    function tombolHilang() {
        document.getElementById("btn-1").disabled = true;
        document.getElementById("btn-2").disabled = true;
        document.getElementById("btn-3").disabled = true;
        document.getElementById("btn-4").disabled = true;
    }

    function mati() {
        if(document.getElementById("eat").value <=1 && document.getElementById("sleep").value <=1) {
            $("#modal5").modal({backdrop: "static", keyboard: false});
            $("#modal5").modal("show");
        }
    }
</script>  
</html>